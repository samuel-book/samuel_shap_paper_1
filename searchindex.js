Search.setIndex({docnames:["introduction/intro","xgb/compare_10k_cohort_1","xgb/compare_benchmark_decisions","xgb/xgb_combined_fit_accuracy","xgb/xgb_combined_shap"],envversion:{"sphinx.domains.c":2,"sphinx.domains.changeset":1,"sphinx.domains.citation":1,"sphinx.domains.cpp":5,"sphinx.domains.index":1,"sphinx.domains.javascript":2,"sphinx.domains.math":2,"sphinx.domains.python":3,"sphinx.domains.rst":2,"sphinx.domains.std":2,"sphinx.ext.intersphinx":1,sphinx:56},filenames:["introduction/intro.md","xgb/compare_10k_cohort_1.ipynb","xgb/compare_benchmark_decisions.ipynb","xgb/xgb_combined_fit_accuracy.ipynb","xgb/xgb_combined_shap.ipynb"],objects:{},objnames:{},objtypes:{},terms:{"0":[1,2,3],"00":4,"000000":3,"000211":3,"000616":2,"000930":3,"0020":3,"002083":3,"002541":3,"0028":3,"003159":3,"003468":4,"003548":4,"004993":4,"005120":3,"005516":3,"005949":3,"006034":3,"006103":3,"006140":3,"006193":3,"006210":3,"006290":3,"006512":3,"006597":3,"006698":3,"007076":3,"007423":3,"007428":3,"007514":3,"008222":3,"008323":3,"008789":3,"008817":3,"008986":3,"009764":3,"01":3,"010317":4,"018297":3,"019013":4,"019129":3,"020129":3,"021495":3,"022319":4,"025":1,"026022":4,"026189":3,"028417":3,"033955":4,"033990":3,"042966":3,"043506":3,"046502":3,"048281":3,"049385":3,"050":1,"054135":3,"055520":4,"055996":3,"061582":3,"07":3,"086348":3,"089152":3,"09":3,"095278":2,"097282":3,"098505":3,"098856":3,"099640":3,"1":[1,2,3,4],"10":[1,3],"100":[2,3],"1000":3,"101168":3,"102390":3,"10k_thrombolysis_rate_by_hosp":[1,2],"10k_training_test":1,"11":3,"111":[3,4],"12":[3,4],"120929":4,"121":3,"122":3,"128":2,"13":3,"130":2,"132":2,"133":2,"14":3,"1428":2,"144034":4,"145699":3,"15":[2,3],"158":2,"158877":3,"16":3,"165":2,"17":3,"17428":4,"17759":4,"18":3,"183":2,"2":[2,3,4],"20":2,"211201":3,"215998":4,"217247":4,"218803":2,"219501":4,"225016":3,"226481":2,"240385":2,"241806":3,"245430":3,"247523":3,"25":3,"250":3,"2500":3,"250179":3,"250435":4,"253425":3,"254050":3,"256186":3,"263977":3,"266026":2,"267865":3,"272248":3,"277878":3,"278":1,"281226":3,"283029":3,"285021":3,"285387":3,"287456":2,"290557":3,"291305":3,"291907":3,"292528":3,"292544":3,"292601":3,"293955":4,"295472":3,"295529":3,"295714":3,"295737":3,"295867":3,"295963":3,"3":[2,3,4],"300":[2,3,4],"307":2,"30k":3,"312":2,"312821":2,"328":2,"33":3,"348873":3,"352295":3,"352468":2,"354980":3,"369748":2,"372":2,"373249":2,"3780":2,"3823":2,"3841":2,"3908":2,"3f":[1,2,3,4],"4":[2,3,4],"400":4,"4073":2,"42":[2,3,4],"427095":2,"45":4,"450098":3,"46":1,"462118":3,"476282":3,"497961":4,"4f":3,"5":[1,2,3],"50":3,"500":[2,3],"5000":3,"52":2,"528":2,"528760":3,"533":2,"537882":3,"549680":3,"552129":3,"556619":3,"574":2,"585":2,"599535":2,"6":[1,2,3,4],"63":2,"64":3,"645020":3,"652007":3,"660212":3,"660230":3,"691105":4,"7":[3,4],"70":3,"700":3,"704037":3,"704133":3,"704263":3,"704286":3,"704471":3,"704528":3,"707399":3,"707456":3,"707472":3,"708093":3,"708695":3,"709443":3,"736023":3,"743814":3,"745950":3,"746575":3,"746863":3,"749592":3,"749665":3,"749821":3,"75":[2,3],"752462":3,"753417":3,"753456":3,"754570":3,"754674":3,"755461":3,"758194":3,"758687":3,"759595":3,"76":3,"760465":3,"761969":3,"762849":3,"765781":3,"793757":3,"8":[3,4],"80":3,"83":2,"84":3,"840981":3,"841123":3,"842":2,"8475":3,"85":3,"852":1,"852734":3,"852799":3,"852968":3,"853":[2,3,4],"855":[2,3,4],"855397":3,"855843":3,"858":[2,3,4],"858044":3,"860":[2,3,4],"860007":3,"871":2,"89":3,"893":3,"893047":3,"893895":3,"894277":3,"895521":3,"897405":3,"897610":3,"898744":4,"898832":3,"898981":3,"9":[3,4],"90":3,"900360":3,"901144":3,"901495":3,"902718":3,"905329":2,"909058":3,"924":3,"9240":3,"929281":3,"943":3,"947152":2,"953866":4,"98":4,"980871":3,"case":[3,4],"class":[1,2,3,4],"float":3,"import":2,"new":3,"return":3,"true":[1,2,3,4],A:[3,4],For:[3,4],One:[1,2,3,4],The:[1,3,4],There:4,To:4,_waterfal:4,a1:3,a2:3,ab:4,abov:3,abs_mean_shap:4,acc:3,accur:4,accuraci:[1,2,4],accuracy_result:3,achiev:3,across:3,add:3,add_subplot:[1,2,3,4],afanticoagulent_y:[3,4],afanticoagulentdoac_y:3,after:[1,2],agg:2,agnof1041h:2,agnost:4,akcgo9726k:2,align:3,all:4,allow:4,along:4,alpha:[2,3],altern:4,an:4,anaconda:4,anchor:3,ani:4,anoth:3,anticoagul:3,aobtm3098n:2,appar:4,append:[1,2,3,4],appli:3,apxee8191h:2,ar:[1,2,3,4],arang:[1,2,3,4],area:3,arrai:[2,3],arriv:3,ascend:[1,2,3,4],asid:1,assign:3,atdid5461:2,atrialfibrillation_y:3,auc:[1,3],averag:3,avoid:4,ax1:[3,4],ax2:3,ax3:3,ax:[1,2,3,4],axi:[1,2,3,4],b1:3,b2:3,b:2,bar:3,base:4,bbox:3,bbox_inch:4,been:[3,4],befor:3,being:3,bench:2,benchmark_decis:2,benchmark_decisions_combined_xgb:2,benchmark_decisions_k_fold:2,benchmark_r:2,benchmark_thrombolysi:2,benchmark_unit:2,benchmark_yes_count:2,bestlanguag:4,between:3,bin:[1,2,3],black:[3,4],blue:[2,3],book:4,both:4,box:4,brain:3,bug:4,build:4,c:2,calculate_accuraci:3,calculate_shap_valu:4,calibarion:3,call:3,can:3,center:3,chanc:3,chang:[1,2],chapter:4,chart:3,chri:4,christophm:4,classif:[3,4],classifici:3,closer:3,cm:2,cmap:4,cnbgf2713o:2,cohort:2,cohort_10000_test:1,cohort_10000_train:1,collect:3,color:[2,3],colour:4,column:[3,4],combin:[2,3],combined_fit_xgb_k_fold:3,combined_model:3,combined_xgb_model_:4,compare_shap_import:4,comparison:3,complet:4,concat:[1,2,3,4],construct:3,convert:3,copi:[1,2],correct:[3,4],correctli:3,cost:4,count:[1,3],csv:[1,2,3,4],custom_lin:[2,3],cutoff:3,darkblu:3,data_loc:[1,2,3,4],datafram:[1,2,3,4],def:3,defin:[1,2,3,4],describ:[3,4],detail:4,df:[2,3,4],dict:3,dictionari:3,digit:3,disadvantag:4,displai:3,distort:4,down:4,dpi:[2,3,4],drop:[1,2,3,4],dump:4,dure:[3,4],e:4,each:3,easier:4,edgecolor:[2,3],effect:4,els:4,en:4,encod:[1,2,3,4],end:[2,3],env:4,eqzzz5658g:2,establish:4,estim:4,even:4,examin:3,exampl:4,excel:4,exist:[1,3,4],expect:2,extend:3,f1:3,f:[1,2,3,4],facecolor:[2,3],fail:4,fals:[1,2,3,4],false_neg:3,false_negative_r:3,false_posit:3,false_positive_r:3,feat:4,feat_to_show:4,featur:2,feature_import:[2,3,4],feature_importances_:[2,3,4],feature_nam:4,fig:[1,2,3,4],figsiz:[1,2,3,4],figur:[1,2,3,4],file:4,filehandl:4,filenam:[3,4],filterwarn:[1,2,3,4],find:[3,4],first:[3,4],fit:[1,2],fit_model:4,five:3,focu:3,fold:2,forest:[3,4],format:[3,4],found:4,fpr:3,frac:3,fraction:3,fraction_correct:3,fraction_posit:3,fraction_result:3,frequenc:2,from:[1,2,3,4],g:4,gener:4,get:3,get_cmap:4,get_dummi:[1,2,3,4],get_intersect:3,get_xticklabel:3,github:4,give:[1,4],gkoni0110i:2,good:[3,4],greater:3,greatest:1,grid:[2,3,4],groupbi:[2,3],h:3,ha:[2,4],harmon:3,have:4,head:[2,3,4],here:4,hist:[1,2],home_unit:2,homogen:3,hospit:[3,4],hospital_result:3,hot:[1,2,3,4],how:4,hstack:3,html:4,http:4,i:[2,3,4],id:[1,2,3],ignor:[1,2,3,4],iloc:3,imag:3,importance_violin:4,importances_df:4,importances_kfold:4,importances_summari:4,improv:3,includ:3,inclusd:4,inclusiong:[],increas:3,increment:3,index:[1,2,3,4],index_col:2,index_label:1,indic:4,individu:[2,4],inf:3,influenc:4,inform:4,initi:4,inplac:[1,2,3,4],instal:4,instanti:3,interpret:4,intersetct:3,invidu:2,io:4,iterrow:2,its:4,jpg:[2,3,4],judg:2,k:2,k_fold:[2,3,4],k_fold_accuraci:3,k_fold_auc:3,k_fold_fpr:3,k_fold_predict:2,k_fold_result:3,k_fold_sensit:3,k_fold_shap_valu:4,k_fold_shap_values_extend:4,k_fold_specif:3,k_fold_threshold:3,k_fold_tpr:3,keep:[1,2,3,4],kei:[3,4],kfold_5fold:[2,3,4],kfold_result:3,known:3,l1:3,l2:3,label:[2,3,4],last:3,last_id_sens_greater_spec:3,later:1,latest:4,least:[3,4],left_index:4,legend:[2,3],len:[3,4],level:4,lfpmm4706c:2,lib:4,librari:4,like:4,likelihood:3,line2d:[2,3],line:2,linear_model:3,linearregress:3,linestyl:3,list:[2,3,4],loc:[1,2,3,4],locat:4,location_high_prob:4,location_low_prob:4,log:4,look:4,loop:[2,3],lot:4,lower:[2,3,4],lw:[2,3],made:[1,2,3],mai:4,majority_vot:2,makedir:[1,3],mani:4,margin:3,marker:2,mask:[2,3],matplotlib:[1,2,3,4],max:[3,4],max_displai:4,max_training_s:3,maximum:3,mean:[1,2,3],mean_abs_shap:4,mean_abs_shap_summari:4,mean_auc:3,mean_intersect:3,mean_results_by_hosp:3,mean_shap:4,measur:4,median:4,merg:4,method:4,metric:[1,3],mhmyl4920b:2,min:[3,4],minut:4,ml:4,mod:2,model:2,model_kfold:4,model_output:4,molner:4,more:4,most:4,much:4,n:3,neg:3,negative_likelihood:3,negative_predictive_valu:3,network:4,neural:4,nihss:3,nipy_spectr:4,nmean:3,nomin:3,non:2,non_bench:2,notebook:[1,2,3,4],np:[1,2,3,4],ntpqz0829k:2,number:3,numpi:[1,2,3,4],o:2,ob:3,observ:2,observed_neg:3,observed_negative_r:3,observed_posit:3,observed_positive_r:3,observed_r:2,observed_result:3,odd:4,off:[1,2,3,4],one:[1,3],ones:3,onli:3,onset:3,open:4,orang:3,os:[1,2,3],otherwis:4,output:[2,4],overal:[3,4],p:4,pad:3,pad_inch:4,panda:[1,2,3,4],parallel:3,part:4,particular:4,pass:3,path:[1,3],patient:[1,3],pd:[1,2,3,4],peopl:4,perform:3,pickl:4,pip:4,pl:4,plot:[2,3],plt:[1,2,3,4],po:3,point:[3,4],poorli:4,posit:[3,4],positive_likelihood:3,positive_predictive_valu:3,pr:3,precis:3,predict:1,predict_proba:[1,2,3,4],predicted_class:3,predicted_neg:3,predicted_negative_r:3,predicted_posit:3,predicted_positive_r:3,predicted_proba:[2,3],predicted_result:3,predicted_thrombolysi:2,prefix:[1,2,3,4],preload:4,present:3,previous:[3,4],print:[1,2,3,4],prob:3,prob_result:3,proba:3,probabl:[1,2,3],process:4,prodict:3,propens:1,proport:[2,3],provid:4,psotiv:3,ptrobabl:4,push:4,put:3,py:4,pyplot:[1,2,3,4],python3:4,r2_score:3,r:[2,3],r_squar:3,random:[3,4],rang:[2,3,4],rank:4,rankin:3,ratio:[2,4],raw:4,rb:4,read_csv:[1,2,3,4],readthedoc:4,recal:3,record:3,red:[2,3],reduc:3,refin:3,reformat:2,relationship:3,reliability_col:3,reliability_summari:3,reliabl:3,remaind:1,renam:4,repeat:3,replac:4,replic:[3,4],replicate_accuraci:3,replicta:4,requir:4,reshap:3,result:2,results_accuraci:3,results_all_accuraci:3,results_training_s:3,right:[2,3,4],right_index:4,roc:3,roc_auc:3,roc_curv:[1,3],rotat:[3,4],rotation_mod:3,run:[2,3],s1ageonarriv:4,s1onsetdatetype_strok:[3,4],s1onsettimetype_precis:[3,4],s1onsettoarrival_min:4,s2brainimagingtime_min:[3,4],s2nihssarriv:[3,4],s2rankinbeforestrok:[3,4],s2stroketype_infarct:[3,4],s2thrombolysi:[1,2,3,4],s:[2,3,4],same:[2,3],same_decis:2,sampl:3,samuel2:4,save:[1,4],saved_model:4,savefig:[2,3,4],scatter:[2,3,4],score:3,sd:3,sd_auc:3,sd_intersect:3,search:4,second:3,see:4,seed:[2,3,4],select:1,sen:3,senit:3,set:[1,2,3,4],set_titl:3,set_xlabel:[1,2,3,4],set_xlim:[2,3,4],set_xscal:4,set_xtick:[3,4],set_xticklabel:[3,4],set_ylabel:[1,2,3,4],set_ylim:[2,3,4],set_yscal:4,setp:3,shap_import:4,shap_importance_correl:4,shap_valu:4,shap_values_extend:4,shap_values_extended_xgb_:4,shap_values_mean:4,shap_values_mean_kfold:4,shap_violin:4,shape:3,share:3,show:[2,3],showmedian:4,shown:4,simultan:3,singl:3,single_predict:1,site:4,size:3,sklearn:[1,3],sleep:[3,4],slr:3,so:[2,4],someon:4,sort:[1,3],sort_index:4,sort_valu:[1,2,3,4],spec:3,split:[2,3,4],sqgxb9559u:2,squar:3,squash:4,stack:3,standard:2,start:2,std:[1,3],stdev:1,step:3,store:[2,3,4],stratifi:[3,4],stroke:[1,2],stroke_team:[1,2],stroketeam:[1,2,3,4],stroketia_y:[3,4],sum:[2,3],summari:3,summaris:3,summary_plot:4,surviv:3,t:[3,4],take:3,team:[1,2,4],team_:[1,2],team_fajkd7118x:3,team_gkoni0110i:[3,4],team_hynbh3271l:3,team_iazkg9244a:3,team_kzkez2257z:3,team_lechf1024t:3,team_lgnpk4211w:3,team_mhmyl4920b:[3,4],team_ntpqz0829k:3,team_qwkra8499d:3,team_tkrkh4920c:3,team_tpxye0168d:3,team_vkkdd9172t:3,team_xkawn3771u:3,test:[1,2,3,4],test_:[2,3,4],test_col:2,test_data:[2,3,4],test_features_col:2,test_hosp:3,text:3,than:3,thei:4,thi:[1,3,4],those:[3,4],though:4,threshold:3,thrombolysis_by_hosp:[1,2],thrombolysis_count:2,thrombolysis_predictions_at_own_unit:2,thrombolysis_predictions_at_own_unit_k_fold:2,thrombolysis_r:1,through:[2,3],tick:3,tidi:[1,2,3,4],tight:4,tight_layout:[2,3],time:3,to_csv:[1,2,3],top:[1,2,3],top_10_import:4,top_10_shap:4,top_30_hopsit:2,top_30_predict:2,tpr:3,train:[2,3,4],train_:[2,3,4],train_data:[2,3,4],train_hosp:3,train_siz:3,tree:4,treeexplain:4,true_neg:3,true_negative_r:3,true_posit:3,true_positive_r:3,true_rat:3,turn:[1,2,3,4],twinx:3,two:3,txhrp7672c:2,type:[3,4],typic:4,under:3,understand:4,unit_count:2,up:[2,3,4],upper:3,us:3,val:[2,3],valu:3,ve:3,verbos:[1,2,3,4],violinplot:4,vkkdd9172t:2,vote:2,vs:3,vstack:3,w:2,wai:4,warn:[1,2,3,4],wb:4,we:4,weight:[3,4],when:4,where:[2,3,4],which:[1,4],white:3,who:3,width:4,without:[1,2],would:1,x:[1,2,3,4],x_comparis:3,x_jitter:4,x_test:[1,2,3,4],x_test_adjust:[1,2],x_test_adjusted_hospit:[1,2],x_test_hosp:[1,2,3,4],x_test_kfold:4,x_test_no_hosp:[1,2],x_train:[1,2,3,4],x_train_hosp:[1,2,3,4],x_train_kfold:4,xgb_beeswarm:4,xgb_combined_fit_feature_import:3,xgb_combined_fit_observed_predicted_r:3,xgb_combined_fit_roc_sens_spec:3,xgb_combined_learning_curv:3,xgb_single_fit_feature_weights_bar:3,xgb_single_reli:3,xgb_waterfall_high:4,xgb_waterfall_high_prob:4,xgb_waterfall_low:4,xgb_waterfall_low_prob:4,xgbclassifi:[1,2,3,4],xgboost:2,y:[1,2,3,4],y_class:[2,3],y_comparis:3,y_pred:[1,2,3,4],y_pred_kfold:4,y_pred_test:3,y_prob:[1,2,3,4],y_prob_kfold:4,y_test:[1,2,3,4],y_test_kfold:4,y_train:[1,2,3,4],y_train_kfold:4,z:3,zero:[1,2],zorder:2},titles:["Introduction placeholder","A comparison of 10K corhort thrombolysis rates across hospitals using a combined XGBoost model","Compare local thrombolysis decisions with benchmark decisions","XGBoost Classifier - Measuring accuracy of a model fitted to all stroke teams together","Explaining XGBoost model predictions with Shapley values"],titleterms:{"0":4,"10":4,"10k":[1,2],"30":2,"40":4,"5":4,"function":3,"import":[1,3,4],A:1,accuraci:3,across:[1,4],actual:3,add:2,aim:3,all:[1,2,3],analysi:4,assess:3,averag:4,beeswarm:4,benchmark:2,between:4,boost:4,calcul:[2,3],calibr:3,characterist:3,check:2,classifi:3,cohort:1,collat:3,combin:1,compar:[2,3,4],comparison:[1,2],confid:3,consist:4,consit:4,corhort:[1,2],count:2,creat:[1,3],cross:3,curv:3,data:[1,2,3,4],decis:[2,4],each:[1,2,4],examin:4,explain:4,featur:[3,4],fit:[3,4],fold:[3,4],folder:[1,3],further:4,get:[1,2,4],ha:3,high:[3,4],hopsit:2,hospit:[1,2],identifi:3,influenti:4,instanc:4,intersect:3,introduct:0,k:[3,4],learn:3,librari:[1,3],line:3,load:[1,2,4],local:2,low:4,mean:4,measur:3,model:[1,3,4],need:[1,3],note:4,number:2,observ:3,one:4,oper:3,output:[1,3],over:3,own:2,packag:4,pass:1,patient:2,placehold:0,plot:[1,4],predict:[2,3,4],probabl:4,rate:[1,2,3],receiv:[3,4],relationship:4,result:3,save:[2,3],sensit:3,shap:4,shaplei:4,show:[1,4],similar:2,specif:3,stat:1,stroke:3,team:3,thrombolys:2,thrombolysi:[1,2,3,4],through:1,togeth:3,top:4,train:1,unit:2,us:[1,2,4],valu:4,version:4,vs:2,waterfal:4,when:3,xg:4,xgboost:[1,3,4]}})