Search.setIndex({docnames:["introduction/intro","shap_worked_example","xgb_with_feature_selection/01_xgb_combined_fit_feature_selection","xgb_with_feature_selection/02_xgb_combined_fit_accuracy_key_features","xgb_with_feature_selection/03_xgb_combined_shap_key_features","xgb_with_feature_selection/04_compare_10k_cohort_key_features","xgb_with_feature_selection/05_compare_benchmark_decisions_key_features","xgb_with_feature_selection/06_predict_differences_between_local_and_benchmark_key_features","xgb_with_feature_selection/07_correlation","xgb_with_feature_selection/outline"],envversion:{"sphinx.domains.c":2,"sphinx.domains.changeset":1,"sphinx.domains.citation":1,"sphinx.domains.cpp":5,"sphinx.domains.index":1,"sphinx.domains.javascript":2,"sphinx.domains.math":2,"sphinx.domains.python":3,"sphinx.domains.rst":2,"sphinx.domains.std":2,"sphinx.ext.intersphinx":1,sphinx:56},filenames:["introduction/intro.md","shap_worked_example.ipynb","xgb_with_feature_selection/01_xgb_combined_fit_feature_selection.ipynb","xgb_with_feature_selection/02_xgb_combined_fit_accuracy_key_features.ipynb","xgb_with_feature_selection/03_xgb_combined_shap_key_features.ipynb","xgb_with_feature_selection/04_compare_10k_cohort_key_features.ipynb","xgb_with_feature_selection/05_compare_benchmark_decisions_key_features.ipynb","xgb_with_feature_selection/06_predict_differences_between_local_and_benchmark_key_features.ipynb","xgb_with_feature_selection/07_correlation.ipynb","xgb_with_feature_selection/outline.md"],objects:{},objnames:{},objtypes:{},terms:{"0":[1,2,3,5,6,7,8],"00":[2,4],"0000":8,"000000":[3,7],"000084":[6,7],"0001":8,"000211":3,"0004":8,"000443":7,"0006":8,"0007":8,"0016":8,"001625":3,"001896":2,"0019":8,"001917":3,"001948":2,"001978":2,"002097":2,"0021":[3,8],"002128":2,"0022":8,"002272":2,"002273":2,"002303":2,"002315":2,"002320":2,"002376":2,"002382":2,"002421":2,"002507":2,"002517":2,"002541":2,"002661":2,"002686":4,"002732":2,"002748":2,"002754":2,"002800":2,"002801":2,"002848":2,"003247":2,"0033":8,"003473":3,"0035":3,"003508":3,"003900":2,"004242":3,"005418":3,"005660":3,"006752":3,"006853":4,"0070":8,"007107":3,"007136":3,"007283":3,"007287":4,"007322":3,"007343":3,"007351":3,"007633":3,"007692":3,"007826":3,"008030":3,"008040":7,"008166":7,"008574":3,"0089":7,"009070":3,"009130":3,"009298":4,"009365":3,"009374":7,"009841":3,"01":[3,4,7],"010190":7,"010216":3,"010322":3,"011024":3,"011207":3,"011375":4,"011766":4,"011771":3,"012466":4,"012489":3,"012503":7,"012756":3,"0131":8,"014597":7,"0152":7,"017156":7,"018412":3,"0186":8,"021129":4,"022037":7,"023144":7,"023867":3,"025":5,"026316":7,"027453":4,"027590":4,"028215":3,"0344":8,"034521":4,"0386":8,"042192":7,"042199":[6,7],"042402":3,"043268":7,"043506":3,"044316":7,"044488":7,"0454":8,"045817":7,"047361":3,"047754":4,"047853":3,"048101":3,"05":8,"050302":4,"050915":7,"051615":3,"051883":7,"058316":3,"062":5,"064285":3,"066211":7,"07":[3,7],"078615":7,"081937":3,"083981":7,"085334":3,"086280":3,"089444":7,"095676":7,"0f":[2,3],"1":[0,1,2,3,4,5,6,7,8],"10":[0,2,3,5],"100":[1,3,6],"1000":3,"101":5,"101623":3,"104396":3,"106055":3,"106260":3,"109":7,"109005":3,"10k":9,"10k_thrombolysis_rate_by_hosp_key_featur":[5,6],"10k_training_test":8,"11":[1,2,3,7],"110":7,"110223":3,"111":[3,4,7],"111111":7,"114":7,"116":6,"119":7,"12":[1,2,3,7],"121":[2,3,7],"122":[2,3,7],"127":[6,7],"128":6,"129":7,"13":[2,3,7],"130":6,"132":[5,6,9],"13243":3,"138":[0,7],"138066":7,"14":[1,2,3,7],"140":7,"1428":6,"145836":3,"149":7,"15":[1,2,3,6,7],"154":7,"159":7,"159372":7,"16":[1,2,3,7],"160670":7,"164487":3,"164565":7,"167213":4,"17":[2,3,7],"170":6,"17013":4,"17104":4,"17180":4,"17184":4,"17208":4,"17664":4,"17758":4,"17759":4,"177932":7,"18":[2,3,7],"186":7,"189":7,"19":[1,2,7],"192718":7,"1f":1,"2":[0,1,2,3,4,5,6,7,8],"20":[0,1,2,6],"200":6,"200000":7,"21":[2,4,7],"218803":6,"219106":7,"22":[2,4,6],"226":6,"226481":6,"23":[2,4,7],"230480":7,"231":7,"235967":7,"238095":7,"24":[2,4],"240385":6,"243931":7,"247578":3,"249272":7,"25":[2,3,7,9],"250":3,"2500":3,"256474":3,"260671":3,"261413":3,"262786":3,"264342":3,"265322":3,"267123":3,"27":[4,7],"271592":3,"272921":7,"273255":7,"28":7,"280":5,"285486":3,"29":7,"291056":3,"291458":3,"291489":7,"291570":3,"292037":3,"292842":3,"294045":3,"294121":3,"294712":7,"294872":6,"295022":3,"295472":3,"295529":3,"295714":3,"295737":3,"295867":3,"295963":3,"296167":6,"297087":3,"297781":3,"298814":3,"3":[0,1,2,3,4,6,7],"30":[7,9],"300":[2,3,4,6,7],"300000012":1,"302669":7,"305040":4,"306383":7,"307":6,"310638":7,"310861":7,"312":6,"316509":3,"317142":7,"318949":7,"323588":7,"324578":7,"327715":7,"33":3,"331915":7,"335835":7,"34":7,"341880":6,"347804":4,"349648":3,"351191":3,"351507":7,"351979":4,"352468":6,"36":[1,7],"367141":3,"369748":6,"38":7,"382353":7,"389962":7,"39":7,"395658":6,"398862":6,"3f":[1,2,3,4,5,6,7],"4":[1,2,3,4,6,7,8],"40":7,"400":4,"401":6,"405789":6,"41":7,"410463":6,"414722":7,"42":[2,3,4,5,6,7],"423527":6,"430186":7,"430693":7,"444480":3,"446559":6,"447":5,"448174":7,"448994":3,"45":[2,4,5,7],"450729":7,"458113":7,"46":[5,7],"460390":6,"463293":7,"464318":7,"467597":7,"468127":7,"468301":7,"468594":7,"469118":4,"47":7,"472306":3,"477408":7,"48":7,"482552":7,"485543":7,"487168":7,"490040":7,"490445":7,"495513":7,"498504":7,"498606":7,"4f":[3,7],"5":[1,2,3,5,6],"50":[3,9],"500":3,"5000":3,"501394":7,"501496":7,"5016":7,"504487":7,"509960":7,"512":6,"514457":7,"517448":7,"528":6,"531406":7,"531699":7,"531873":7,"532403":7,"546004":3,"55":6,"550910":3,"555520":3,"56":7,"565":6,"574":6,"585":6,"59":2,"6":[1,2,3,4,5,6,7],"608663":4,"615767":7,"627783":[6,7],"63":7,"632859":3,"635854":3,"64":[3,7],"644135":7,"648760":7,"652850":3,"654891":7,"658103":7,"66":7,"660853":7,"662602":7,"664165":7,"668085":7,"67":7,"672285":7,"674273":3,"674975":7,"675":7,"675422":7,"675972":7,"676":7,"676412":7,"68":7,"681051":7,"685382":7,"686203":7,"6876":7,"689139":7,"689362":7,"69":[3,7],"690114":7,"690927":7,"691":7,"691235":7,"692":3,"693617":7,"696278":7,"697331":7,"697906":7,"698":7,"699029":7,"699422":7,"7":[1,2,3,4,6,7],"703232":7,"703633":7,"704037":3,"704133":3,"704263":3,"704286":3,"704471":3,"704528":3,"704978":3,"705879":3,"707158":3,"707963":3,"708000":7,"708430":3,"708511":7,"708542":3,"71":7,"715":2,"715332":2,"717537":7,"718750":7,"724346":7,"727079":7,"728408":3,"732877":3,"734678":3,"735658":3,"736220":3,"736782":3,"736852":3,"737":7,"737166":7,"7372":7,"737214":3,"738355":3,"739039":3,"739329":3,"739852":3,"74":[3,6],"740819":3,"743526":3,"743722":3,"743917":3,"744470":3,"747044":3,"748168":3,"748945":3,"75":[3,6,7],"752323":3,"754444":3,"76":7,"77":7,"78":7,"791939":2,"792":2,"8":[0,1,2,3,4,5,6,7,8,9],"80":3,"81":7,"82":6,"824061":3,"828":6,"83":[3,7],"835513":3,"8370":3,"84":3,"844":[3,4,6],"844239":3,"8442392161279423":5,"844746":3,"845":[3,4,6],"846":[3,4,6],"846275":3,"847452":3,"849":[3,4,6],"849420":3,"849530":2,"85":5,"850":2,"851260":3,"852582":3,"853":[3,4,6],"86":7,"871":6,"874870":2,"875":2,"88":[3,7],"880155":[6,7],"883":3,"88667":7,"88698":7,"88740":7,"88758":7,"88783":7,"88787":7,"88788":7,"88789":7,"88790":7,"88791":7,"88792":7,"888403":3,"888791":3,"889208":3,"889777":3,"89":[3,7],"890":2,"890108":3,"890313":2,"890995":3,"891187":3,"892951":3,"893740":3,"893945":3,"895604":3,"896424":3,"898377":3,"9":[1,2,3,4,6,7],"90":3,"903":2,"903222":2,"91":7,"910375":3,"913876":2,"914":2,"915":2,"915791":2,"9158":3,"916":[2,3],"916311":[6,7],"917":2,"917107":7,"917436":2,"918":2,"918334":2,"919":2,"919070":2,"919606":2,"92":6,"920":2,"920283":2,"920590":2,"920646":2,"921":2,"921448":2,"921648":2,"921684":2,"921704":2,"921730":2,"921784":2,"921872":2,"921923":2,"922":2,"922001":2,"922031":2,"932336":3,"944589":3,"95":2,"96":4,"966":3,"97":4,"971404":4,"976133":3,"99":4,"break":0,"case":[0,3,4,7],"class":[3,4,5,6,7],"do":0,"float":[3,7],"import":[0,1,6,8,9],"long":0,"new":[2,3],"return":[3,7],"true":[2,3,4,5,6,7,8],"try":0,A:[0,4,7,9],And:0,At:0,For:[3,9],In:0,Is:0,Of:[7,9],One:[2,3,4,5,6],Or:0,That:0,The:[0,1,3,4,5,6,7,9],There:[0,4,8],These:[0,2,8],To:4,_combined_test_featur:3,_feature_import:3,_feature_weights_bar:3,_learning_curv:3,_observed_predicted_r:3,_predict:3,_reliabl:3,_roc_sens_spec:3,_waterfal:4,a1:[3,7],a2:[3,7],ab:[4,7,8],abl:[0,2],about:0,abs_mean_shap:[4,7],abs_valu:8,absenc:1,absent:0,absolut:8,acc:3,accord:1,accur:[4,7],accuraci:[0,2,4,5,6,9],accuracy_result:[3,7],achiev:3,across:[3,9],actual:0,add:[1,2,3,4,5,7,8],add_subplot:[1,2,3,4,5,6,7],adult:0,af:4,afanticoagulent_y:[0,2,3,4,5,6,7,8,9],afanticoagulentheparin_no:2,afanticoagulentheparin_y:2,afantiplatelet_no:2,after:[0,5,6,8,9],ag:0,agg:[6,7],agnof1041h:6,agnost:9,ai:0,aim:[6,7,8],akcgo9726k:6,algorithm:1,align:3,all:[0,2,3,4,7,8,9],allen:0,allow:[0,9],along:[1,4,7],alpha:[3,6],alreadi:2,also:[0,2,4,9],altern:[4,7],an:[1,3,4,5,7,9],anaconda:4,analys:[4,9],anchor:3,ani:[0,1,9],anlys:9,anoth:[3,7],anticoagul:[0,4],aobtm3098n:6,appar:[4,7],append:[2,3,4,5,6,7,8],appli:[0,7,9],apxee8191h:6,ar:[2,3,4,6,7,8,9],arang:[3,4,5,6,7],area:[0,3,7],arrai:[1,3,6,7],arriv:[0,4],artifici:0,ascend:[3,4,5,6,7,8],aspect:0,assess:9,assign:3,atdid5461:6,atrial:0,attend:0,auc:[2,3,5,7,9],auc_std:2,audienc:0,audit:0,auto:1,avail:[0,2,9],available_featur:2,averag:[0,2,3,9],average_scor:1,avoid:[2,4,7],ax1:[2,3,4,7],ax2:[2,3,7],ax3:3,ax:[1,3,4,5,6,7],axi:[1,2,3,4,5,6,7,8],b1:[3,7],b2:[3,7],b:6,back:7,bar:3,base:[0,1,3,4,7,9],base_scor:1,baselin:1,bbox:[1,3,7],bbox_inch:[4,7],been:[0,1,2,3,4],beeswarm:9,befor:[0,4],being:[0,2,3,7,8],below:0,bench:6,benchmark:9,benchmark_decis:6,benchmark_decisions_combined_xgb_key_featur:[6,7],benchmark_decisions_k_fold:6,benchmark_r:6,benchmark_ratio:7,benchmark_thrombolysis_key_featur:6,benchmark_unit:6,benchmark_yes_count:6,benchmark_yes_observed_no:7,best:2,best_featur:2,best_result:2,best_result_k_fold:2,bestlanguag:2,between:[3,6,9],bin:[3,5,6],black:[0,1,3,7,9],bleed:0,blood:0,blue:[3,6],book:9,booster:1,both:[0,4,7],box:[0,9],brain:0,breakdown:0,bug:4,build:[4,9],bust:0,c:6,calculate_accuraci:[3,7],calculate_shap_valu:4,calibarion:3,calibr:9,call:[0,3,7],came:0,can:[0,1,3,4,7],carri:1,caus:0,center:3,chanc:[0,3,7],chang:[1,2,5,6,9],chapter:9,characterist:9,chart:3,check:9,choic:0,choos:[2,9],chosen:[2,9],chosen_featur:2,chri:9,christophm:9,classif:[3,4,7],classifi:9,classifici:[3,7],clinic:0,clinician:0,close:0,closer:3,clot:0,cm:[6,8],cmap:[4,7],cnbgf2713o:6,code:[5,9],cohort:[6,9],cohort_10000_test:8,cohort_10000_train:8,collect:3,color:[1,3,6,7],colour:[4,7],cols_to_drop:7,colsample_bylevel:1,colsample_bynod:1,colsample_bytre:1,column:[3,4,7,8],com:9,combin:[0,1,3,6,7,8],combined_test_set:3,combined_xgb_model_key_features_:4,common:0,commun:0,compar:[0,1,5,9],compare_shap_import:[4,7],comparison:9,complet:[2,4,7],compon:1,concat:[2,3,4,5,6,8],consid:0,consienc:4,consist:9,construct:3,consult:0,contain:0,contribut:[0,9],convert:[3,7,8],copi:[2,5,6],correct:[3,4,7],correctli:[3,7],correl:[4,9],cost:[4,7],could:0,count:[3,5,7],cov:8,covari:8,creat:7,cross:9,csv:[1,2,3,4,5,6,7,8],curv:9,custom_lin:[3,6],cutoff:[3,7],darkblu:[3,7],data:[0,9],data_loc:[2,3,4,5,6],data_std:8,datafram:[1,2,3,4,5,6,7,8],decim:8,decis:[0,9],decision_comparison_importance_violin_key_featur:7,decision_comparison_roc_sens_spec_key_featur:7,decision_comparison_shap_importance_correlation_key_featur:7,decision_comparison_shap_violin_key_featur:7,def:[3,7],defin:[1,2,3,4,5,6,7],del:3,depend:[0,1],depict:0,describ:[0,3,4,7],detail:[4,7],df:[1,3,4,6,7],diagram:0,dict:[1,3,7],dictionari:[3,7],did:0,differ:[1,4,9],difficult:0,digit:3,disabl:[0,4],disadvantag:[4,7],discov:0,displai:[3,8],distort:[4,7],doe:0,don:0,down:[4,7],dpi:[2,3,4,6,7],dqkfo8183i:7,drive:0,drop:[1,2,3,4,5,6,7,8],drop_dupl:8,drug:0,dtype:1,due:0,dump:4,duplic:8,dure:[0,2],e:[0,3,4,9],each:[0,2,3,9],easier:[0,4,7],edgecolor:[1,3,6,7],effect:[1,4,7],eight:1,els:4,elucid:4,en:9,enable_categor:1,encod:[2,3,4,5,6],end:[3,6],ensembl:7,env:4,eqzzz5658g:[6,7],establish:[4,7],estim:[0,4,6,9],etc:[0,3,9],even:[4,7],everyon:0,exact:1,examin:[1,3,9],exampl:[0,4,7,9],excel:9,except:[5,9],exclud:4,exist:[2,3,4,5,7],expect:[0,5,6,9],experi:[7,9],expert:0,explain:[1,7,9],explor:[0,1,4],extend:3,extinctioninattent:2,f1:[3,7,9],f:[1,2,3,4,5,6,7],facecolor:[1,3,6,7],facialpalsi:2,fail:4,fajkd7118x:7,fals:[1,2,3,4,5,6,7,8],false_neg:[3,7],false_negative_r:[3,7],false_posit:[3,7],false_positive_r:[3,7],feat:[4,7],feat_to_show:[4,7],featur:[0,1,5,6,9],feature_auc:2,feature_data:7,feature_import:[3,4,6],feature_importances_:[3,4,6,7],feature_nam:[1,4,7],feature_select:[2,3,4,5,6,8],features_to_show:2,features_to_us:2,fibril:0,fig:[1,2,3,4,5,6,7],figsiz:[1,2,3,4,5,6,7],figur:[0,1,2,3,4,5,6,7],file:[3,4],filehandl:4,filenam:[3,4],filterwarn:[1,2,3,4,5,6,7],find:[3,4,7],first:[1,3,4,7,9],fit:[5,6,7,8,9],fit_model:4,fit_resampl:3,five:[0,4,7],float64:1,focu:3,focus:[7,9],fold:[5,6,9],forest:3,format:[2,3,4,5,6],forward:[2,9],found:[0,9],four:[0,8],fpr:[2,3,7],frac:3,fraction:3,fraction_correct:3,fraction_posit:3,fraction_result:3,frequenc:6,from:[0,1,2,3,4,5,6,7,8],further:9,g:[0,3,4,9],gamma:1,gbtree:1,gener:[0,1,9],get:[0,3,8,9],get_cmap:[4,7],get_dummi:[2,3,4,5,6],get_intersect:[3,7],get_n_split:7,get_xticklabel:3,github:[0,9],give:[0,1,4,7,9],given:[0,1],gkoni0110i:6,global:[0,1],global_averag:1,good:[4,7],gpu_id:1,greater:[3,7,8],grei:0,grid:[1,2,3,4,6,7],groupbi:[1,3,6,7],h:[3,7],ha:[0,1,2,4,6,7],had:[0,5],haemorrhag:[0,3],haemorrhagic_test:3,harmon:[3,7],have:[0,1,4,7],head:[1,3,4,6,7],health:0,help:4,here:[0,1,4,7],high:0,higher:0,hist:[4,5,6],hold:2,home_unit:6,homogen:[3,7],hospit:[2,3,4,9],hospital_result:3,hot:[2,3,4,5,6,9],how:[0,9],hpwif9956l:6,hstack:[3,7],html:9,http:9,hzmlx7970t:7,i:[2,3,4,5,6,7],iatje0497:7,iazkg9244a:6,id:[0,5,6,7],ident:6,identifi:9,ignor:[1,2,3,4,5,6,7],ignore_index:8,iloc:[3,7],imag:0,imagin:0,imblearn:3,imort:4,importance_features_index:7,importance_typ:1,importance_violin_key_featur:4,importances_df:[4,7],importances_kfold:[4,7],importances_summari:[4,7],improv:[2,9],includ:[0,1,9],increas:[0,3,6,7],increment:[3,7],independ:2,index:[2,3,4,5,6,7,8,9],index_col:6,index_label:5,indic:[4,7],individu:[0,3,4,6,7,9],inf:[3,7],infarct:0,influenc:[0,1,4,7,9],influenti:0,inform:[0,9],initi:4,initialis:2,inplac:[2,3,4,5,6,7,8],insight:0,instal:4,instanc:1,instanti:3,institut:0,integ:1,intellig:0,interaction_constraint:1,interest:0,interpret:9,intersect:7,intersetct:[3,7],interview:0,investig:[0,4,7],invidu:6,io:9,isin:7,isizf6614o:7,iterrow:[6,8],its:[4,7],journei:0,jpg:[2,3,4,6,7],judg:[4,6,9],k:[5,6,9],k_fold:[2,3,4,6,7],k_fold_accuraci:3,k_fold_auc:[3,7],k_fold_fpr:[3,7],k_fold_predict:6,k_fold_result:[3,7],k_fold_sensit:[3,7],k_fold_shap_valu:[4,7],k_fold_shap_values_extend:[4,7],k_fold_specif:[3,7],k_fold_threshold:[3,7],k_fold_tpr:[3,7],keep:[1,2,3,4,5,6,7],kei:[4,7],kerri:0,key_featur:[3,4,5,6,8],kfold_5fold:[2,3,4,5,6],kfold_result:3,know:0,known:[0,1],l1:[3,7],l2:[3,7],label:[3,4,6,7],larg:0,last:[3,7],last_id_sens_greater_spec:[3,7],latest:9,lead:[2,9],learning_r:[1,2,3,4,5,6,7],least:[3,9],lechf1024t:7,left_index:[4,7],legend:[3,6],len:[1,2,3,4,7],level:[0,4,7],lfpmm4706c:[6,7],lgnpk4211w:7,lib:4,librari:[4,8,9],like:[0,9],likelihood:[3,7],limbataxia:2,line2d:[3,6],line:[5,6,7],linear_model:[1,3],linearregress:[1,3],linestyl:[3,7],list:[1,3,4,5,6,7,8],load:[3,8],loc:[2,3,4,5,6,7],local:[0,9],locat:[1,4,7],location_high_prob:[4,7],location_high_scor:1,location_low_prob:[4,7],location_low_scor:1,locquest:2,log:[4,7,9],longer:0,look:[4,7],loop:[2,3,6,7],lot:0,low:0,low_thrombolysing_hospit:7,low_thrombolysing_hospitals_df:7,lower:[0,3,4,6,7],lw:[3,6],lzaym7611l:7,made:[0,6,9],mai:[0,4,7,9],major:[6,7,9],majority_vot:[6,7],make:[0,7],makedir:[2,3,5],mani:[0,4,7],margin:0,mark:1,marker:6,mask:[3,6,7,8],matplotlib:[1,2,3,4,5,6,7,8],max0:5,max:[1,3,4,5,7],max_delta_step:1,max_depth:1,max_displai:[4,7],max_training_s:3,maximum:[2,3,5],mean:[0,1,2,3,5,6,9],mean_abs_shap:[4,7],mean_abs_shap_summari:[4,7],mean_auc:[3,7],mean_intersect:[3,7],mean_results_by_hosp:3,mean_shap:[4,7],measur:[4,9],median:[4,7],melt:8,member:0,merg:[4,7],method:[4,7,9],metric:[1,2,3,5,7],mhmyl4920b:[6,7],michael:0,might:0,min:[0,1,3,4,5,7],min_child_weight:1,minimum:5,minor:3,minut:4,miss:1,ml:[0,9],mod:6,model:6,model_kfold:[4,7],model_output:[4,7],model_predict:3,model_select:7,model_typ:3,modifi:0,molner:9,moment:0,monotone_constraint:1,more:[4,7,9],moreequal80y_y:2,most:[0,2,4,7,9],much:[0,9],my:9,n:[1,3,4,7],n_estim:1,n_job:1,n_split:7,name:[1,7],nan:1,nation:0,ndiffer:1,neg:[3,7],negative_likelihood:[3,7],negative_predictive_valu:[3,7],network:9,neural:9,nfbuf0424:7,nh:0,night:0,nihr:0,nihss:[0,4],nine:0,nipy_spectr:[4,7],nmean:[3,7],nomin:3,non:6,non_bench:6,none:1,note:[0,9],notebook:[0,1,2,3,4,5,6,7],np:[1,2,3,4,5,6,7,8],ns2brainimagingtime_min:4,num_parallel_tre:1,number:[0,1,2,3,9],number_featur:2,number_of_featur:2,number_of_features_to_us:[3,4,5,6,8],numpi:[1,2,3,4,5,6,7,8],o:6,ob:[3,7],observ:9,observed_kfold:7,observed_neg:[3,7],observed_negative_r:[3,7],observed_posit:[3,7],observed_positive_r:[3,7],observed_r:6,observed_result:3,odd:[4,7,9],off:[1,2,3,4,5,6,7],one:[0,5,9],ones:[3,7],onli:[0,7,8],onset:[0,4],open:4,oper:9,opinion:0,orang:[3,7],order:[0,4],origin:2,os:[2,3,5,6],other:[0,2],otherwis:4,our:0,out:[0,2,3,7,9],outcom:[0,1],output:[0,4,6,7,8],ouxuz1084q:7,over:9,over_sampl:3,overal:[3,4,9],oversampl:3,oyasq1316d:7,p:4,pad:[2,3,7],pad_inch:[4,7],pair:8,panda:[1,2,3,4,5,6,7,8],parallel:[3,7],part:[0,9],particular:[0,9],pass:[3,7],path:[2,3,5],pathwai:0,patient:[0,3,5,7,9],pattern:0,pd:[1,2,3,4,5,6,7,8],pearn:0,peopl:[0,4,7,9],perform:[0,9],pick:1,pickl:[4,7],pip:4,pl:4,place:8,plan:0,plateau:0,player:0,player_pres:1,player_shap_valu:1,plot:[0,2,3,6,9],plt:[1,2,3,4,5,6,7,8],po:3,point:[3,4,7,9],poorli:[4,7],posit:[3,4,7],positive_likelihood:[3,7],positive_predictive_valu:[3,7],possibl:0,practic:0,precis:[0,3,4,7],predict:[2,5,9],predict_proba:[2,3,4,5,6,7],predicted_class:[3,7],predicted_kfold:7,predicted_neg:[3,7],predicted_negative_r:[3,7],predicted_posit:[3,7],predicted_positive_r:[3,7],predicted_proba:[3,6,7],predicted_proba_kfold:7,predicted_result:3,predicted_thrombolysi:[6,7],predictor:1,prefix:[2,3,4,5,6],preload:4,preprocess:8,presenc:1,present:[0,8],previou:0,previous:[2,3,4],principl:0,print:[1,2,3,4,5,6,7],prob:3,prob_result:3,proba:[3,7],probabl:[0,1,2,3,5,6,9],probablil:7,process:[0,4],project:0,propens:0,proport:[3,6,7],provid:[2,4,9],psotiv:3,ptrobabl:4,pub:[0,1,9],push:[4,7],put:[3,7],py:4,pyplot:[1,2,3,4,5,6,7,8],python3:4,quiz:[0,1,9],qwkra8499d:7,r2_score:[1,3],r:[1,3,6,8],r_squar:[1,3],randint:1,random:[1,3],random_loc:1,random_st:[1,7],randomforestclassifi:7,randomoversampl:3,rang:[0,2,3,4,5,6,7,9],rank:[4,7],rankin:[0,4],rate:[7,9],rather:[0,4,9],ratio:[4,6,7,9],ration:6,raw:[4,7],rb:4,rdvpj0375x:7,read_csv:[1,2,3,4,5,6,7,8],readthedoc:9,reason:4,recal:[3,7],receiv:[0,9],record:[2,3],red:[1,3,6],reduc:[0,3,7,9],refin:3,reformat:6,reg_alpha:1,reg_lambda:1,rel:4,relationship:[0,3,9],reliability_col:3,reliability_summari:3,reliabl:3,remov:[2,7,8],renam:[4,7],repeat:3,replac:4,replic:[3,4,7,9],replicate_accuraci:3,replicta:[4,7],report:8,repositori:[0,9],repres:0,requir:[3,4],research:0,reset:2,reset_index:3,reshap:[1,3],restrict:[2,7,8],restricted_data:7,result:[2,6,7,8],results_accuraci:3,results_all_accuraci:3,results_training_s:3,right:[2,3,4,6,7],right_index:[4,7],roc:[2,3,7,9],roc_auc:[2,3,7],roc_auc_by_feature_numb:2,roc_auc_k_fold_by_feature_numb:2,roc_curv:[2,3,5,7],rose:0,rotat:[2,3,4,7],rotation_mod:3,round:[1,8],row:7,run:[2,3,6,7],s1admissionhour_18:2,s1ethnicity_mix:2,s1onsetdatetype_strok:2,s1onsettimetype_precis:[0,2,3,4,5,6,7,8,9],s1onsettoarrival_min:[0,2,3,4,5,6,7,8,9],s2brainimagingtime_min:[0,2,3,4,5,6,7,8,9],s2newafdiagnosis_no:2,s2nihssarriv:[0,2,3,4,5,6,7,8,9],s2rankinbeforestrok:[0,2,3,4,5,6,7,8,9],s2stroketype_infarct:[0,2,3,4,5,6,7,8,9],s2thrombolysi:[2,3,4,5,6,7,8],s2tiainlastmonth_y:2,s:[0,3,6,7,9],same:[0,3,6,7,9],same_decis:6,sampl:3,sampling_strategi:3,samuel2:4,samuel:[0,9],samuel_shap_paper_1:9,save:[4,5,9],saved_model:4,savefig:[2,3,4,6,7],sc:8,scale:[0,8],scale_pos_weight:[1,7],scan:[0,4],scatter:[1,3,4,6,7,9],score:[0,2,3,7,9],sd:[3,7],sd_auc:[3,7],sd_intersect:[3,7],search:4,second:[3,7],see:[0,9],seed:[2,3,4,5,6],seek:0,seen:0,select:9,self:8,sen:[3,7],senit:[3,7],sensit:9,sensori:2,sequenti:[2,9],set:[0,1,2,4,5,6,7,9],set_index:7,set_titl:[3,7],set_xlabel:[1,2,3,4,5,6,7],set_xlim:[3,4,6],set_xscal:[4,7],set_xtick:[3,4,7],set_xticklabel:[2,3,4,7],set_ylabel:[1,2,3,4,5,6,7],set_ylim:[2,3,4,6,7],set_yscal:[4,7],setp:3,sever:[0,4],sex:0,shap:[0,9],shap_exampl:1,shap_import:[4,7],shap_importance_correlation_key_featur:4,shap_summari:1,shap_summary_by_play:1,shap_valu:[1,4,7],shap_values_extend:[1,4,7],shap_values_extended_xgb_key_features_:4,shap_values_mean:[4,7],shap_values_mean_kfold:[4,7],shap_violin_key_featur:4,shape:3,shaplei:[1,7,9],share:3,should:0,show:[0,2,3,6,9],showmedian:[4,7],shown:[0,4,7],shuffl:7,signific:0,similar:[0,9],simpl:9,simultan:3,singl:[0,1,3],single_predict:5,site:4,size:3,skf:7,sklearn:[1,2,3,5,7,8],sleep:2,slow:0,slr:[1,3],smvtp6284p:7,so:[1,6,9],some:[0,4],someon:[4,7],sometim:0,sort:[3,5,8],sort_index:[4,7],sort_valu:[3,4,5,6,7,8],spec:[3,7],specif:9,split:[2,3,4,6,7,9],sqgxb9559u:[6,7],squar:[1,3,8],squash:[4,7],stack:[3,7],standard:[6,9],standardscal:8,start:[1,6],std:[2,3,5,7],stdev:5,step:[3,7],store:[2,3,4,6,7],stratifi:[2,3,4],stratifiedkfold:7,string:8,stroke:[0,3,4,5,6,8],stroke_team:[5,6],stroketeam:[0,2,3,4,5,6,7,8,9],stroketia_y:2,subsampl:1,subset:8,sum:[3,6,7],summari:3,summaris:3,summary_plot:[1,4,7],sure:0,surviv:[3,7],symptom:0,t:[0,3,4,7],tailor:0,take:[3,7],tall:8,target:0,team:[0,1,2,3,4,5,6,8,9],team_:[5,6],team_fajkd7118x:3,team_gkoni0110i:[3,4],team_hbfcn1575g:3,team_hynbh3271l:3,team_hznvt9936g:3,team_iazkg9244a:3,team_iyjhy1440:[3,4],team_kzkez2257z:3,team_lechf1024t:[3,4],team_lgnpk4211w:3,team_mhmyl4920b:[3,4],team_ntpqz0829k:3,team_qwkra8499d:3,team_smvtp6284p:3,team_tkrkh4920c:3,team_tpxye0168d:3,team_vkkdd9172t:[3,4],team_xdafb7350m:[3,4],team_xkawn3771u:[3,4],techniqu:0,term:0,test:[2,4,5,6,7,8,9],test_:[2,3,4,5,6],test_auc_result:2,test_col:6,test_data:[2,3,4,5,6],test_features_collated_key_featur:[6,7],test_hosp:3,test_index:7,text:[1,3,7],than:[3,4,7,8,9],thei:[0,9],therapi:0,thi:[1,2,3,4,5,6,7],thing:0,those:[0,1,3,4,6,7,9],though:[4,7],three:[0,9],threshold:[2,3,7],thrombolys:[0,7,9],thrombolysi:[1,8,9],thrombolysis_by_hosp:[5,6],thrombolysis_count:[6,7],thrombolysis_decision_data:7,thrombolysis_predictions_at_own_unit:6,thrombolysis_predictions_at_own_unit_k_fold:6,thrombolysis_r:5,through:[2,3,6,7],tick:3,tidi:[1,2,3,4,5,6,7],tight:[4,7],tight_layout:[2,3,6,7],tim:1,time:[0,4],to_csv:[2,3,5,6],top:[3,6,9],top_10_import:[4,7],top_10_shap:[4,7],top_30_hopsit:6,top_30_predict:6,tpr:[2,3,7],tracker:2,train:[0,2,3,4,6,7,8,9],train_:[2,3,4,5,6],train_data:[2,3,4,5,6],train_hosp:3,train_index:7,train_siz:3,transform:8,treat:0,treatment:0,tree:[4,7,9],tree_method:1,treeexplain:[1,4,7],true_neg:[3,7],true_negative_r:[3,7],true_posit:[3,7],true_positive_r:[3,7],true_rat:7,turn:[0,1,2,3,4,5,6,7],twinx:3,two:[3,7],txhrp7672c:[6,7],type:[0,3,4,7,9],typic:[4,7],uk:0,under:[2,3,7],understand:[0,4,7],unit:[0,7,9],unit_count:6,up:[0,1,2,3,4,6,7,9],updat:2,upper:3,us:[2,3,5,9],use_minority_oversampl:3,val:[3,6],validate_paramet:1,valu:[1,3,8,9],variabl:8,variat:0,ve:[3,7],verbos:[1,2,3,4,5,6,7],veri:[0,1,8,9],violinplot:[4,7],vkkdd9172t:6,vote:[6,7,9],vs:[0,3,4],vstack:[3,7],w:6,wa:[0,4,6],wai:[4,7],want:0,warn:[1,2,3,4,5,6,7],waterfal:[0,9],wb:4,we:[0,1,4,7,9],weak:8,weight:[3,4],well:[0,3],were:[0,4,6,7,9],when:[0,4,7,9],where:[0,1,3,4,6],whetehr:[],whether:0,which:[0,1,4,7,9],white:[1,3,7],who:[3,7,9],why:0,wide:8,width:[4,7],wish:0,without:[5,6],work:9,would:[0,6,9],wrt:1,x:[2,3,4,5,6,7],x_comparis:3,x_jitter:[4,7],x_test:[2,3,4,5,6,7],x_test_adjust:[5,6],x_test_adjusted_hospit:[5,6],x_test_hosp:[2,3,4,5,6],x_test_kfold:[4,7],x_test_no_hosp:[5,6],x_train:[2,3,4,5,6,7],x_train_hosp:[2,3,4,5,6],x_train_kfold:[4,7],xdfkw2704k:7,xgb_beeswarm_key_featur:4,xgb_combined_calibrated_oversampl:3,xgb_combined_key_featur:3,xgb_decision_comparison_beeswarm_key_featur:7,xgb_decision_comparison_waterfall_high_key_featur:7,xgb_decision_comparison_waterfall_high_probability_key_featur:7,xgb_decision_comparison_waterfall_low_key_featur:7,xgb_decision_comparison_waterfall_low_probability_key_featur:7,xgb_prediciting_difference_shap_scatter_:7,xgb_thrombolysis_shap_scatter_:4,xgb_thrombolysis_shap_scatter_scan_time_trunc:4,xgb_waterfall_high_key_featur:4,xgb_waterfall_high_probability_key_featur:4,xgb_waterfall_low_key_featur:4,xgb_waterfall_low_probability_key_featur:4,xgbclassifi:[2,3,4,5,6,7],xgboost:[3,6,7],xgbregressor:1,xlabel:2,xpabc1435f:7,y:[2,3,4,5,6,7],y_arrai:1,y_class:[3,6,7],y_comparis:3,y_pred:[1,3,4,5,6,7],y_pred_arrai:1,y_pred_best_fit:1,y_pred_kfold:4,y_pred_test:3,y_prob:[2,3,4,5,6,7],y_prob_kfold:4,y_test:[2,3,4,5,6,7],y_test_kfold:[4,7],y_train:[2,3,4,5,6,7],y_train_kfold:[4,7],ye:7,your:0,z:[3,7],zero:[5,6],zorder:6},titles:["Introduction","A simple worked example of Shap","XGBoost feature selection","Measuring accuracy of k-fold models","Explaining XGBoost model predictions with Shapley values","A comparison of 10K cohort thrombolysis rates across hospitals","Compare local thrombolysis decisions with benchmark decisions","Predicting differences between local and benchmark decisions","Check correlation between selected features","Outline"],titleterms:{"0":4,"10":[4,7],"10k":[5,6],"30":6,"40":4,"5":[4,7],"50":7,"function":[3,7],"import":[2,3,4,5,7],A:[1,5],accuraci:[3,7],across:[4,5,7],actual:3,add:6,aim:[0,2,3,4,5],all:[1,5,6],an:0,analysi:[4,7],appli:3,ar:0,assess:3,averag:[1,4,7],background:0,beeswarm:[1,4,7],benchmark:[6,7],between:[0,4,7,8],boost:[0,4],build:7,calcul:[1,3,6,7,8],calibr:3,characterist:[3,7],check:[3,6,8],cohort:5,collat:3,combin:5,compar:[3,4,6,7],comparison:[5,6],conclus:0,confid:3,consist:[4,7],consit:[4,7],corhort:6,correl:8,count:6,creat:[2,3,5],cross:[3,7],curv:[3,7],data:[1,2,3,4,5,6,7,8],decis:[4,6,7],differ:[0,7],distinguish:7,each:[1,4,5,6,7],examin:[4,7],exampl:1,explain:[0,4],featur:[2,3,4,7,8],find:0,fit:[1,2,3,4],fold:[2,3,4,7],folder:[2,3,5],further:[4,7],game:1,get:[1,2,4,5,6,7],ha:3,high:[3,4,7],higher:7,highest:1,hopsit:6,hospit:[0,5,6,7],identifi:[3,7],influenti:[4,7],instanc:[4,7],intersect:3,introduct:0,k:[2,3,4,7],kei:0,lead:7,learn:[0,3],least:7,librari:[2,3,5],line:3,list:2,load:[1,4,5,6,7],local:[6,7],low:[4,7],lowest:1,machin:0,mean:[4,7],measur:[3,7],method:0,model:[0,1,2,3,4,5,7,9],modif:3,need:[2,3,5],note:4,notebook:9,number:6,observ:[1,2,3,4,5,6,7,8],one:[4,7],oper:[3,7],outlin:9,output:[2,3,5],over:[3,7],own:6,packag:4,pass:5,patient:6,player:1,plot:[1,4,5,7],predict:[0,1,3,4,6,7],present:1,probabl:[4,7],rate:[3,5,6],receiv:[3,4,7],regressor:1,relationship:[4,7],result:3,save:[3,6],score:1,section:9,select:[2,8],sensit:[3,7],set:3,shap:[1,4,7],shaplei:[0,4],show:[1,4,5,7],similar:6,simpl:1,specif:[3,7],split:1,standardis:8,stat:5,studi:0,test:3,thi:[0,9],thrombolys:6,thrombolysi:[0,3,4,5,6,7],through:5,top30:7,top:[4,7],train:[1,5],unit:6,us:[0,4,6,7],valu:[0,4,7],version:4,vs:[1,6],waterfal:[1,4,7],what:0,when:[1,3],where:7,whether:1,work:1,would:7,x:1,xg:[0,4],xgboost:[0,1,2,4,5,9],y:1}})